$schema: http://json-schema.org/draft-07/schema#
$id: https://github.com/lsst-ts/ts_watcher/Watcher.yaml
title: Watcher v1
description: Configuration for the Watcher
type: object
required: [rules]
additionalProperties: false
properties:
  disabled_sal_components:
    description: >-
      Names of SAL components that the Watcher will ignored.
      The format is component_name:index where :index is optional if the index is 0.
    type: array
    default: []
    items:
      type: string
  auto_acknowledge_delay:
    description: >-
      Delay (in seconds) before a stale alarm is automatically acknowledged,
      or 0 for no automatic acknowledgement.
      A stale alarm is one that has not yet been acknowledged, but its
      severity has gone to NONE.
    type: number
    default: 3600
  auto_unacknowledge_delay:
    description: >-
      Delay (in seconds) before an acknowledged alarm is automatically
      unacknowledged, or 0 for no automatic unacknowledgement.
      Automatic unacknowledgement only occurs if the alarm persists,
      because an acknowledged alarm is reset if the severity goes to NONE.
    type: number
    default: 3600
  rules:
    description: Rules and rule configuration.
    type: array
    items:
      type: object
      required: [classname, configs]
      additionalProperties: false
      properties:
        classname:
          description: >-
            Name of rule class, e.g. Heartbeat.
            If the class is in a subdirectory of "rules" separate the fields with a period, e.g. at.AnAuxTelRule.
          type: string
        configs:
          description: >-
            Configuration for each instance of the rule.
            The data will be validated against the rule's schema.
            Use a pair of curly braces for an empty config.
          type: array
          minItems: 1
          items:
            type: object
